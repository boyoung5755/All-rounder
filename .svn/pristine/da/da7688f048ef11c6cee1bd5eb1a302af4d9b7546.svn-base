<%--
* [[개정이력(Modification Information)]]
* 수정일           수정자      수정내용
* ----------  ---------  -----------------
* 2023. 11. 28.  전수진      최초작성
* Copyright (c) ${year} by DDIT All right reserved
 --%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<style>

.modalUl{
	padding-top : 15px;
}
#select2-proxy-container {
     border-bottom: 1px solid rgb(105, 108, 255);
}


</style>

<div class="content-wrapper">
<!-- Content -->

<div class="container-xxl flex-grow-1 container-p-y">
  <h4 class="py-3 mb-4"><span class="text-muted fw-light">전자결재 /</span> Dashboard</h4>
<div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3">
  <div class="d-flex flex-column justify-content-center">
  </div>
  <div class="d-flex align-content-center flex-wrap gap-2" id="buttonArea">
	<c:choose>
		<c:when test="${empty proxy}">
			<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#proxyModal">
			  대결권설정
			</button>
		</c:when>
		<c:otherwise>
			<button type="button" class="btn btn-primary offProxy">
			  대결권해제
			</button>
		</c:otherwise>
	</c:choose>
  </div>
</div>
<input type="hidden" id="prxsanctnNo" value="${proxy.prxsanctnNo}">
  <!-- Card Border Shadow -->
  <div class="row">
    <div class="col-sm-6 col-lg-3 mb-4">
      <div class="card card-border-shadow-primary h-100">
        <div class="card-body">
          <p class="mb-1">상신</p>
          <div class="d-flex align-items-center mb-2 pb-1">
            <div class="avatar me-2">
              <span class="avatar-initial rounded bg-label-primary"><i class="bx bxs-truck"></i></span>
            </div>
            <h4 class="ms-1 mb-0"> 건</h4>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3 mb-4">
      <div class="card card-border-shadow-danger h-100">
        <div class="card-body">
          <p class="mb-1">반려</p>
          <div class="d-flex align-items-center mb-2 pb-1">
            <div class="avatar me-2">
              <span class="avatar-initial rounded bg-label-danger"><i class="bx bx-git-repo-forked"></i></span>
            </div>
            <h4 class="ms-1 mb-0"> 건</h4>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3 mb-4">
      <div class="card card-border-shadow-warning h-100">
        <div class="card-body">
          <p class="mb-1">결재대기</p>
          <div class="d-flex align-items-center mb-2 pb-1">
            <div class="avatar me-2">
              <span class="avatar-initial rounded bg-label-warning"><i class="bx bx-error"></i></span>
            </div>
            <h4 class="ms-1 mb-0"> 건</h4>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-3 mb-4">
      <div class="card card-border-shadow-info h-100">
        <div class="card-body">
          <p class="mb-1">수신문서</p>
          <div class="d-flex align-items-center mb-2 pb-1">
            <div class="avatar me-2">
              <span class="avatar-initial rounded bg-label-info"><i class="bx bx-time-five"></i></span>
            </div>
            <h4 class="ms-1 mb-0"> 건</h4>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--/ Card Border Shadow -->
  <div class="row">
    <!-- On route vehicles Table -->
    <div class="col-12 order-5 mb-4">
      <div class="card">
        <div class="card-header d-flex align-items-center justify-content-between">
          <div class="card-title mb-0">
            <h5 class="m-0 me-2">내가 상신한 문서</h5>
          </div>
          <div class="dropdown">
            <button class="btn p-0" type="button" id="routeVehicles" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="bx bx-dots-vertical-rounded"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="routeVehicles">
              <a class="dropdown-item" href="javascript:void(0);">Select All</a>
              <a class="dropdown-item" href="javascript:void(0);">Refresh</a>
              <a class="dropdown-item" href="javascript:void(0);">Share</a>
            </div>
          </div>
        </div>
        <div class="card-datatable table-responsive">
          <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer"><div class="table-responsive"><table class="dt-route-vehicles table dataTable no-footer dtr-column" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
            <thead class="border-top">
              <tr><th class="control sorting_disabled dtr-hidden" rowspan="1" colspan="1" style="width: 36.4375px; display: none;" aria-label=""></th><th class="sorting_disabled dt-checkboxes-cell dt-checkboxes-select-all" rowspan="1" colspan="1" style="width: 30.3594px;" data-col="1" aria-label=""><input type="checkbox" class="form-check-input"></th><th class="sorting sorting_asc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 154.406px;" aria-sort="ascending" aria-label="location: activate to sort column descending">location</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 239.406px;" aria-label="starting route: activate to sort column ascending">starting route</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 213.328px;" aria-label="ending route: activate to sort column ascending">ending route</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 164.469px;" aria-label="warnings: activate to sort column ascending">warnings</th><th class="w-20 sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 241.594px;" aria-label="progress: activate to sort column ascending">progress</th></tr>
            </thead><tbody><tr class="odd"><td valign="top" colspan="6" class="dataTables_empty">Loading...</td></tr></tbody>
          </table></div><div class="row d-flex align-items-center"><div class="col-sm-12 col-md-6"><div class="dataTables_info pt-0" id="DataTables_Table_0_info" role="status" aria-live="polite">Showing 0 to 0 of 0 entries</div></div><div class="col-sm-12 col-md-6"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="DataTables_Table_0_previous"><a aria-controls="DataTables_Table_0" aria-disabled="true" role="link" data-dt-idx="previous" tabindex="0" class="page-link">Previous</a></li><li class="paginate_button page-item next disabled" id="DataTables_Table_0_next"><a aria-controls="DataTables_Table_0" aria-disabled="true" role="link" data-dt-idx="next" tabindex="0" class="page-link">Next</a></li></ul></div></div></div></div>
        </div>
      </div>
    </div>
  </div>
  <!--/ On route vehicles Table -->
  <!-- On route vehicles Table -->
    <div class="col-12 order-5 mb-4">
      <div class="card">
        <div class="card-header d-flex align-items-center justify-content-between">
          <div class="card-title mb-0">
            <h5 class="m-0 me-2">내가 결재할 문서</h5>
          </div>
          <div class="dropdown">
            <button class="btn p-0" type="button" id="routeVehicles" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="bx bx-dots-vertical-rounded"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="routeVehicles">
              <a class="dropdown-item" href="javascript:void(0);">Select All</a>
              <a class="dropdown-item" href="javascript:void(0);">Refresh</a>
              <a class="dropdown-item" href="javascript:void(0);">Share</a>
            </div>
          </div>
        </div>
        <div class="card-datatable table-responsive">
          <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer"><div class="table-responsive"><table class="dt-route-vehicles table dataTable no-footer dtr-column" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
            <thead class="border-top">
              <tr><th class="control sorting_disabled dtr-hidden" rowspan="1" colspan="1" style="width: 36.4375px; display: none;" aria-label=""></th><th class="sorting_disabled dt-checkboxes-cell dt-checkboxes-select-all" rowspan="1" colspan="1" style="width: 30.3594px;" data-col="1" aria-label=""><input type="checkbox" class="form-check-input"></th><th class="sorting sorting_asc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 154.406px;" aria-sort="ascending" aria-label="location: activate to sort column descending">location</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 239.406px;" aria-label="starting route: activate to sort column ascending">starting route</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 213.328px;" aria-label="ending route: activate to sort column ascending">ending route</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 164.469px;" aria-label="warnings: activate to sort column ascending">warnings</th><th class="w-20 sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 241.594px;" aria-label="progress: activate to sort column ascending">progress</th></tr>
            </thead><tbody><tr class="odd"><td valign="top" colspan="6" class="dataTables_empty">Loading...</td></tr></tbody>
          </table></div><div class="row d-flex align-items-center"><div class="col-sm-12 col-md-6"><div class="dataTables_info pt-0" id="DataTables_Table_0_info" role="status" aria-live="polite">Showing 0 to 0 of 0 entries</div></div><div class="col-sm-12 col-md-6"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="DataTables_Table_0_previous"><a aria-controls="DataTables_Table_0" aria-disabled="true" role="link" data-dt-idx="previous" tabindex="0" class="page-link">Previous</a></li><li class="paginate_button page-item next disabled" id="DataTables_Table_0_next"><a aria-controls="DataTables_Table_0" aria-disabled="true" role="link" data-dt-idx="next" tabindex="0" class="page-link">Next</a></li></ul></div></div></div></div>
        </div>
      </div>
    </div>
  </div>
  <!--/ On route vehicles Table -->
</div>
<!-- / Content -->

<!-- Large Modal -->
<div class="modal fade" id="proxyModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header pb-2 border-bottom mb-4">
        <h5 class="modal-title" id="exampleModalLabel3">대결권 설정</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col mb-3">
            <label for="nameLarge" class="form-label">대결자 검색</label>
            <select class="select2 select-email-contacts form-select" name="prxsanctnCnfer" id="prxsanctnCnfer"></select>
          </div>
        </div>
        <div class="row g-2 mb-3">
          <div class="col mb-0">
            <label for="dobLarge" class="form-label">대결권 설정 기간</label><br />
            <input id="alwncDate" name="alwncDate" class="form-control mb-4" placeholder="시작일자선택" />
          </div>
          <div class="col mb-0">
            <label for="dobLarge" class="form-label">　</label><br />
            <input id="extshDate" name="extshDate" class="form-control mb-4" placeholder="종료일자선택"/>
          </div>
        </div>
        <div class="row">
          <div class="col mb-3">
            <label for="nameLarge" class="form-label">대결권 지정사유</label>
            <input type="text" id="alwncReason" name="alwncReason" class="form-control mb-4" placeholder="지정사유를 입력해주세요!" />
          </div>
        </div>
        <div class="row">
	        <div class="col mb-3">
				<div class="alert d-flex align-items-center bg-label-info mb-0" role="alert">
				  <span class="alert-icon text-info me-2 bg-label-light px-1 rounded-2">
				    <i class="bx bx-info-circle bx-xs"></i>
				  </span>
				  <ul class="modalUl">
					  <li><small>대결자를 복수로 지정할 수 없습니다.</small></li>
					  <li><small>대결권설정기간은 익일부터 설정이 가능합니다.</small></li>
					  <li><small>대결권설정기간은 2주안으로만 설정이 가능합니다.</small></li>
				  </ul>
				</div>
			</div>
		</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">닫기</button>
        <button type="button" class="btn btn-primary" id="saveBtn">저장</button>
      </div>
    </div>
  </div>
</div>

<script src="${pageContext.request.contextPath }resources/js/app/sanction/sanctionHome.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	$("#alwncDate").datepicker({
		format: "yyyy-mm-dd",	//데이터 포맷 형식(yyyy : 년 mm : 월 dd : 일 )
		startDate: '+1d',	//달력에서 선택 할 수 있는 가장 빠른 날짜. 이전으로는 선택 불가능 ( d : 일 m : 달 y : 년 w : 주)
		endDate: '+14d',	//달력에서 선택 할 수 있는 가장 느린 날짜. 이후로 선택 불가 ( d : 일 m : 달 y : 년 w : 주)
		autoclose: true,	//사용자가 날짜를 클릭하면 자동 캘린더가 닫히는 옵션
		calendarWeeks: false, //캘린더 옆에 몇 주차인지 보여주는 옵션 기본값 false 보여주려면 true
		clearBtn: false, //날짜 선택한 값 초기화 해주는 버튼 보여주는 옵션 기본값 false 보여주려면 true
		datesDisabled: ['2019-06-24', '2019-06-26'],//선택 불가능한 일 설정 하는 배열 위에 있는 format 과 형식이 같아야함.
		daysOfWeekDisabled: [0, 6],	//선택 불가능한 요일 설정 0 : 일요일 ~ 6 : 토요일
		daysOfWeekHighlighted: [3], //강조 되어야 하는 요일 설정
		// disableTouchKeyboard : false,	//모바일에서 플러그인 작동 여부 기본값 false 가 작동 true가 작동 안함.
		immediateUpdates: false,	//사용자가 보는 화면으로 바로바로 날짜를 변경할지 여부 기본값 :false 
		multidate: false, //여러 날짜 선택할 수 있게 하는 옵션 기본값 :false 
		multidateSeparator: ",", //여러 날짜를 선택했을 때 사이에 나타나는 글짜 2019-05-01,2019-06-01
		templates: {
			leftArrow: '&laquo;',
			rightArrow: '&raquo;'
		}, //다음달 이전달로 넘어가는 화살표 모양 커스텀 마이징 
		showWeekDays: true,// 위에 요일 보여주는 옵션 기본값 : true
		title: "사용일자",	//캘린더 상단에 보여주는 타이틀
		todayHighlight: true,	//오늘 날짜에 하이라이팅 기능 기본값 :false 
		toggleActive: true,	//이미 선택된 날짜 선택하면 기본값 : false인경우 그대로 유지 true인 경우 날짜 삭제
		weekStart: 0,//달력 시작 요일 선택하는 것 기본값은 0인 일요일 
		language: "ko"	//달력의 언어 선택, 그에 맞는 js로 교체해줘야한다.
	}); //datepicker end
	
	$("#extshDate").datepicker({
		format: "yyyy-mm-dd",	//데이터 포맷 형식(yyyy : 년 mm : 월 dd : 일 )
		startDate: '+2d',	//달력에서 선택 할 수 있는 가장 빠른 날짜. 이전으로는 선택 불가능 ( d : 일 m : 달 y : 년 w : 주)
		endDate: '+14d',	//달력에서 선택 할 수 있는 가장 느린 날짜. 이후로 선택 불가 ( d : 일 m : 달 y : 년 w : 주)
		autoclose: true,	//사용자가 날짜를 클릭하면 자동 캘린더가 닫히는 옵션
		calendarWeeks: false, //캘린더 옆에 몇 주차인지 보여주는 옵션 기본값 false 보여주려면 true
		clearBtn: false, //날짜 선택한 값 초기화 해주는 버튼 보여주는 옵션 기본값 false 보여주려면 true
		datesDisabled: ['2019-06-24', '2019-06-26'],//선택 불가능한 일 설정 하는 배열 위에 있는 format 과 형식이 같아야함.
		daysOfWeekDisabled: [0, 6],	//선택 불가능한 요일 설정 0 : 일요일 ~ 6 : 토요일
		daysOfWeekHighlighted: [3], //강조 되어야 하는 요일 설정
		// disableTouchKeyboard : false,	//모바일에서 플러그인 작동 여부 기본값 false 가 작동 true가 작동 안함.
		immediateUpdates: false,	//사용자가 보는 화면으로 바로바로 날짜를 변경할지 여부 기본값 :false 
		multidate: false, //여러 날짜 선택할 수 있게 하는 옵션 기본값 :false 
		multidateSeparator: ",", //여러 날짜를 선택했을 때 사이에 나타나는 글짜 2019-05-01,2019-06-01
		templates: {
			leftArrow: '&laquo;',
			rightArrow: '&raquo;'
		}, //다음달 이전달로 넘어가는 화살표 모양 커스텀 마이징 
		showWeekDays: true,// 위에 요일 보여주는 옵션 기본값 : true
		title: "사용일자",	//캘린더 상단에 보여주는 타이틀
		todayHighlight: true,	//오늘 날짜에 하이라이팅 기능 기본값 :false 
		toggleActive: true,	//이미 선택된 날짜 선택하면 기본값 : false인경우 그대로 유지 true인 경우 날짜 삭제
		weekStart: 0,//달력 시작 요일 선택하는 것 기본값은 0인 일요일 
		language: "ko"	//달력의 언어 선택, 그에 맞는 js로 교체해줘야한다.
	}); //datepicker end
	

});

</script>
