/**
 * <pre>
 * 
 * </pre>
 * @author 작성자명
 * @since 2023. 11. 23.
 * @version 1.0
 * <pre>
 * [[개정이력(Modification Information)]]
 * 수정일        	수정자       수정내용
 * --------     	--------    ----------------------
 * 2023. 11. 23.     김보영       최초작성 ,이슈등록
 * Copyright (c) 2023 by DDIT All right reserved
 * </pre>
 */ 

//일반인지 결함인지 버튼클릭이벤트
function fn_issueSe(jobStcd){
		
	document.getElementById("jobStcd").value = jobStcd;
		
	var elements = document.querySelectorAll('.btn-jobStcd');
	elements.forEach(function(element) {
		element.classList.remove('active');
	});
	    
	    //제이쿼리 사용법
// 	    $(".btn-jobStcd").each(function(i, ele){
// 	    $.each(".btn-jobStcd", function(i, ele){
// 	    	$(ele).removeClass("active");
// 	    })
	    
	$(".btnJobStcd").eq(jobStcd-1).addClass("active");
	//$("#jobStcd").val(jobStcd);
}



//이슈등록 비동기

function fn_issueInsert(){
	
	fn_swalConfirm("이슈를 등록하시겠습니까?", function(){
		//비동기
		var data = new FormData($("#issueInsertForm")[0]);
		var proSn = $('#proSn').val();
	
		$.ajax({
			type: "POST",
			enctype: 'multipart/form-data',
			url: "/issue/"+proSn+"/insert",
			data: data,
			processData: false,
			contentType: false,
			cache: false,
			success: function (data) {
				var text;
				var icon;
				var jobSn = data.jobSn;
				if (data.success == "Y") {
					text = "이슈 등록이 완료되었습니다.";
					icon = "success";
				} else {
					text = "이슈 등록이 실패되었습니다.";
					icon = "warning";
				}
				//모달창열기
				fn_swalComplete(text, icon, "/issue/"+proSn+"/insert", data.success);
			},
			error: function () {
				fn_swalError();
			}
		});
	});
	
}

