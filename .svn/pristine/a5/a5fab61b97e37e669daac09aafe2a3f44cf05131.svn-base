<%--
* [[개정이력(Modification Information)]]
* 수정일       		수정자        수정내용
* ---------- 		---------  -----------------
* 2023. 11. 25.     박민주        최초작성
* Copyright (c) 2023 by DDIT All right reserved
--%>

<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://www.springframework.org/security/tags"
	prefix="security"%>


<h1 class="mb-0">차량예약</h1>
<br>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
	<div class="layout-container">
		<!-- Layout container -->
		<div class="layout-page">
			<!-- Content wrapper -->
			<div>
				<!-- Content -->
				<!-- navbar -->

				<div class="col-md-7 col-lg-7">
					<ul class="nav nav-pills mb-3 nav-fill" role="tablist">
						<li class="nav-item" role="presentation"><a
							class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
							href="#" aria-expanded="false" data-trigger="hover"> <i
								class="bx bxs-copy-alt"></i> 프로젝트
						</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/job/P23004/home">차량관리</a> <a
									class="dropdown-item" href="/job/P23004/home">예약관리</a>
							</div></li>
						<li class="nav-item" role="presentation"><a
							class="nav-item nav-link active" href="javascript:void(0)"> <i
								class="bx bx-edit"></i> 일감
						</a></li>
						<li class="nav-item" role="presentation"><a
							class="nav-item nav-link" href="/issue/P23006/home"> <i
								class="bx bx-calendar-exclamation"></i> 이슈
						</a></li>
						<li class="nav-item" role="presentation"><a
							class="nav-item nav-link" href="/pms/gantt/P23006"> <i
								class="bx bx-chart"></i> 간트차트
						</a></li>
						<li class="nav-item" role="presentation"><a
							class="nav-item nav-link disabled" href="javascript:void(0)">
								<i class="bx bxs-doughnut-chart"></i> 리더통계
						</a></li>
					</ul>
				</div>
				<hr />

				<!--차트와 참여자-->
				<div class="row mb-5">

					<div class="col-md-6 col-lg-6">
						<div class="card  mb-3">
							<div class="card-body">
								<h5 class="card-title">
									등록차량목록
									<button type="button"
										class="btn rounded-pill btn-label-primary"
										data-bs-toggle="modal" data-bs-target="#backDropModal">
										<span class="tf-icons bx bx-paper-plane me-1">예약</span>
									</button>
									<button type="button"
										class="btn rounded-pill btn-label-primary"
										onclick="fn_vhcleDelBtn()">삭제</button>
									<button type="button"
										class="btn rounded-pill btn-label-primary"
										onclick="fn_vhcleUpdBtn()">저장</button>
								</h5>
								<hr />
								<div id="vehicleList" class="ag-theme-balham"
									style="height: 500px">
									<!-- agGrid -->
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6 col-lg-6">
						<div class="card  mb-3">
							<div class="card-body">
								<h5 class="card-title">
									<i class='bx bx-sm bx-list-check'></i> 예약내역(default : 오늘날짜)버튼
									클릭해서 달력보기
								</h5>
								<div id="reservceList" class="ag-theme-balham"
									style="height: 500px"></div>
							</div>
						</div>
					</div>

					<div class="col-xl-12 col-12" style="text-align: left;">
						<div class="card-body">
							<div class="block-ui-btn demo-inline-spacing">
								<button type="button" class="btn rounded-pill btn-label-primary"
									data-bs-toggle="modal" data-bs-target="#backDropModal">
									<span class="tf-icons bx bx-paper-plane me-1"></span>추가
								</button>
							</div>
						</div>
					</div>

					<!--일감테이블-->

					<hr class="my-0 mb-3 mt-2">
					<input type="hidden" class="divider-text" data-pro-sn="ㅂㅂ" />
					<div class="table-responsive text-nowrap">
						<table class="table card-table">
							<thead>
								<tr>
									<th>일감명</th>
									<th>작성자</th>
									<th>진행도</th>
									<th>담당자</th>
									<th>상태</th>
									<th>마감일</th>
								</tr>
							</thead>
							<tbody id="jobList" class="table-border-bottom-0">
								<!-- 일감리스트 비동기출력 -->
							</tbody>
							<tfoot id="jobPaging">
							</tfoot>
						</table>
					</div>
				</div>
			</div>
			<!-- /Content -->
		</div>
		<!-- /Content wrapper -->
	</div>
	<!-- /Layout container -->
</div>
<!-- /Layout wrapper -->
<%-- <form method="get" id="searchForm" class="border" >
	<hidden name="searchType" readonly="readonly" placeholder="searchType"/>
	<hidden name="searchWord" readonly="readonly" placeholder="searchWord"/>
	<input type="hidden" name="page" readonly="readonly" placeholder="page"/>
</form> --%>

<!-- 차량 등록 모달 -->
<div class="modal fade" id="backDropModal" data-bs-backdrop="static"
	tabindex="-1" style="display: none;" aria-hidden="true">

	<div class="modal-dialog">
		<form action="/vehicle" id="newVehicleForm" class="modal-content"
			method="POST" enctype="multipart/form-data">
			<security:csrfInput />
			<div class="modal-header">
				<h5 class="modal-title" id="backDropModalTitle">
					<i class='bx bxs-comment-add bx-md'></i> 예약하기
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
				<hr>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col mb-3" style="height: 300px">
						<label for="vhcleInfo" class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 차량정보</label>
					</div>
				</div>
				<div class="row">
					<div class="col mb-8">
						<label for=vhcleUseDate class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 사용일자</label>
						<input
							name="vhcleUseDate" id="vhcleUseDate"
							class="form-control" placeholder="날짜선택" required />
					</div>
					<div class="col mb-4">
						<label for="vhcleUseTimeCd" class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 사용시간</label>
						<select multiple class="form-control text-center" name="vhcleUseTimeCd" id="vhcleUseTimeCd" required>
							<c:forEach items="${timeCd}" var="item">
								<option value="${item.commonCodeCd}">${item.commonCodeSj}</option>			
							</c:forEach>		
						</select>
					</div>
				</div>
				<div class="row">
					<div class="col mb-3">
						<label for="vhcleReservePur" class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 사용목적</label> <input
							name="vhcleReservePur" type="text" id="vhcleReservePur"
							class="form-control" placeholder="ex) 외근 (고객사 미팅)" maxlength="40" required />
					</div>
				</div>
				<div class="row">
					<div class="col mb-3">
						<label for="vhcleReserveEmpCd" class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 예약자 사번</label> <input
							name="vhcleReserveEmpCd" type="text" id="vhcleReserveEmpCd"
							class="form-control" placeholder="ex) E231121002" maxlength="10" required />
					</div>
					<div class="col mb-3">
						<label for="vhcleReservePw" class="fw-medium"><i
							class='bx bxs-book-alt bx-sm mb-1'></i> 취소용 비밀번호</label> <input
							name="vhcleReservePw" type="password" id="vhcleReservePw"
							class="form-control" placeholder="ex) 1234" required maxlength="4"/>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-label-secondary"
					data-bs-dismiss="modal">Close</button>
				<button type="button" onclick="fn_vReserve()"
					class="btn btn-primary">Save</button>
			</div>
		</form>
	</div>
</div>

<script>
	var __basePath = './';
</script>
<script
	src="https://cdn.jsdelivr.net/npm/ag-grid-community@30.2.1/dist/ag-grid-community.min.js"></script>
<script src="/resources/js/app/reservation/vehicle.js"></script>