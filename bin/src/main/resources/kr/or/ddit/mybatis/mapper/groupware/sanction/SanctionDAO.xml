<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--  [[개정이력(Modification Information)]]       -->
<!--  수정일        수정자     수정내용               -->
<!--  ==========   ======    ==============        -->
<!--  2023. 11. 16.}     작성자명     최초작성               -->
<!--  Copyright (c) 2023 by DDIT All right reserved -->

<mapper namespace="kr.or.ddit.groupware.sanction.dao.SanctionDAO">

	<!-- 결재문서 등록 -->
	<insert id="insertSanction" parameterType="SanctionVO">
		<selectKey order="BEFORE" keyColumn="sanctnNo" resultType="String" >
			SELECT 
			    'DOC'||TO_CHAR(SYSDATE,'YYMMDD')||
			    LPAD(NVL(TO_NUMBER(SUBSTR(MAX(SANCTN_NO), INSTR(MAX(SANCTN_NO), '_') + 1)), 0) + 1, 3, '000') 
			FROM
			    SANCTION
		</selectKey>
			INSERT INTO SANCTION (
			    SANCTN_NO		/* 결재문서번호 */
			    , DRAFTER		/* 기안자 */
			    , FORM_NO 		/* 결재양식번호 */
			    , SANCTN_SJ		/* 결재문서제목 */
			    , SANCTN_DATE	/* 결재문서 작성일자 */
			    , SANCTN_STTUS 	/* 결재문서 상태 */
			    , SANCTN_RCYER 	/* 결재수신자 */
			    , SANCTN_SOURC 	/* 결재문서 저장소스 */
			) VALUES (
				#{sanctnNo}
			    , #{drafter}
			    , #{formNo}
			    , #{sanctnSj}
			    , SYSDATE
			    , '1'
			    , #{sanctnRcyer}
			    , #{sanctnSourc}
			)
	</insert>
	
	<!-- 결재문서 리스트 조회 -->
	<select id="selectSanctionAllList" parameterType="PaginationInfo" resultType="SanctionVO">
	
	</select>
	
	<!-- 로그인한 사용자의 결재문서 리스트 조회 -->
	<select id="selectSanctionList" parameterType="PaginationInfo" resultType="SanctionVO">
	
	</select>
	
	<!-- 결재문서 상세조회 -->
	<resultMap type="SanctionVO" id="sanctionMap">
	
	</resultMap>
	<select id="selectSanction" parameterType="String" resultMap="sanctionMap">
	
	</select>
	
	<!-- 결재문서 수정 -->
	<update id="updateSanction" parameterType="SanctionVO">
	
	</update>
	
	<delete id="deleteSanction" parameterType="String">
	
	</delete>
	
	
</mapper>